## Моторизированная тележка управляемая по ИК от стандартного пульта ДУ
### Модуль цифровой схемы для формирования управляющих сигналов серводвигателем.

Этот модуль позволяет управлять серводвигателем моторизированной тележки, изменяя поворот сервопривода с помощью PDM сигнала. Входные сигналы задаются с контроллера (модуль Control), реагирующего на стандартный пульт ДУ.
Преобразуя входные сигналы, на выходе модуль подает PDM сигнал заданного заполнения на выход pdm_done.
Модуль спроектирован для работы на плате ["Карно"](https://github.com/Fabmicro-LLC/Karnix_ASB-254), на базе ПЛИС Lattice ECP5.

На выходе pdm_done выдается следующий сигнал:

![image](https://github.com/user-attachments/assets/8715343f-aa65-4942-8aeb-5b69fd07c22d)

В зависимости от длительности логической единицы (от 1,1 мс до 1,9 мс), сервопривод примет положение от 90 градусов влево до 90 градусов вправо. После логической единицы идет 20 мс логического нуля, затем сигнал повторяется.
Модуль разработан для сервопривода Hitec HS-325HB. Документация к сервоприводу: https://hitecrcd.co.jp/material/spec_sheet/servo/33325.pdf

#### Входные сигналы:
* clk - тактовая частота;
* en - сигнал разрешения работы;
* rst - сигнал сброса;
* duty - коэффициент заполнения PDM сигнала.

#### Выходные сигналы:
* pdm_done - PDM-сигнал.

#### Установка и запуск
1. Установить OS Linux.
2. Установить инструментарий: [YosysHQ](https://github.com/YosysHQ/oss-cad-suite-build/releases/), [OpenFPGALoader](https://github.com/trabucayre/openFPGALoader).
3. Установить make: `sudo apt install make`.
4. Клонировать репозиторий в любую рабочую директорию:  
`git clone --branch servo_pdm --single-branch https://github.com/burningchair0/learning-fgpa.git`.
5. Перейти в директорию MotorDRV: `cd learning-fpga/ServoPDM`. 
6. Подключить плату "Карно" к компьютеру через USB. 
7. Выполнить синтез "битстрима": `make`.
8. Выполнить загрузку на плату: `make upload`.
